<!DOCTYPE html>
<html>
<head>
    <title>Event Booking Register Page</title>
</head>
<body>
    <h1 class="form-title">Register Page</h1>

    <form id="registerForm" class="form register-form">
        <div class="form-group">
            <label for="name">Enter Name</label>
            <input type="text" name="name" id="name" class="form-input">
        </div>
    
        <div class="form-group">
            <label for="email">Enter Email</label>
            <input type="text" name="email" id="email" class="form-input">
        </div>
    
        <div class="form-group">
            <label for="pwd">Enter Password</label>
            <input type="password" name="pwd" id="pwd" class="form-input">
        </div>
    
        <div class="form-group">
            <label for="role">Select Role</label>
            <select name="role" id="role" class="form-select">
                <option value="user">User</option>
                <option value="organizer">Organizer</option>
            </select>
        </div>
    
        <input type="submit" value="Register" class="btn btn-submit">
    </form>
    
    <div id="responseMessage" style="color: red; margin-top: 10px;"></div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

    <script>
        $("#registerForm").on("submit", function(event) {
            event.preventDefault();

            const namefield = $("#name").val();
            const emailfield = $("#email").val();
            const pwdfield = $("#pwd").val();
            const rolefield = $("#role").val();

            if (namefield && emailfield && pwdfield && rolefield) {
                $.ajax({
                    url: 'php/register.php',
                    type: 'POST',
                    data: {
                        name: namefield,
                        email: emailfield,
                        password: pwdfield,
                        role: rolefield
                    },
                    success: function(response) {
                        if (response == "User registered") {
                            window.location.href = "login.html";
                        } else {
                            $('#responseMessage').text(response);
                        }
                    },
                    error: function() {
                        alert("An error occurred. Please try again later.");
                    }
                });
            } else {
                alert("Please fill in all fields");
            }
        });
    </script>
</body>
</html>
